(()=>{var e={};e.id=472,e.ids=[472],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},94367:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d}),t(13881),t(44013),t(35866);var a=t(23191),r=t(88716),l=t(37922),n=t.n(l),i=t(95231),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(s,c);let d=["",{children:["all-business",{children:["[businessId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,13881)),"D:\\Codes\\Keephy\\keephy-next\\src\\app\\all-business\\[businessId]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,44013)),"D:\\Codes\\Keephy\\keephy-next\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["D:\\Codes\\Keephy\\keephy-next\\src\\app\\all-business\\[businessId]\\page.tsx"],x="/all-business/[businessId]/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/all-business/[businessId]/page",pathname:"/all-business/[businessId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},42818:(e,s,t)=>{Promise.resolve().then(t.bind(t,77877))},77877:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>F});var a=t(10326),r=t(73775),l=t(17577),n=t.n(l),i=t(25842),c=t(35155),d=t(98392),o=t(35047);let x=({allFranchise:e})=>{let s=(0,o.useParams)(),t=(0,o.useRouter)();return a.jsx(a.Fragment,{children:a.jsx("div",{className:"relative overflow-x-auto overflow-hidden rounded-xl shadow-[0px_0px_60px_30px_#00000008]",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left text-black-500 border-collapse",children:[a.jsx("thead",{className:"text-xs bg-[#FFC020] text-white uppercase",children:(0,a.jsxs)("tr",{className:"*:px-6 *:py-3 *:text-base *:font-medium *:whitespace-nowrap *:border-b border-[#D9D9D9]",children:[a.jsx("th",{scope:"col",children:"Primary Email"}),a.jsx("th",{scope:"col",children:"Opening Hour"}),a.jsx("th",{scope:"col",children:"Closing Hour"}),a.jsx("th",{scope:"col",children:"Address"})]})}),a.jsx("tbody",{children:(e||[]).map((e,r)=>(0,a.jsxs)("tr",{onClick:()=>t.push(`/all-business/${s?.businessId}/${e._id}`),className:"odd:bg-white even:bg-[#FFC020] cursor-pointer h-[61px] even:bg-opacity-15 last:border-0 border-b border-[#D9D9D9] *:text-sm *:font-normal *:whitespace-nowrap *:px-6 *:py-2.5 *:capitalize",children:[a.jsx("td",{scope:"row",children:e?.primaryEmail}),a.jsx("td",{children:e?.openingHour}),a.jsx("td",{children:e?.closingHour}),a.jsx("td",{className:"lg:!whitespace-normal",children:e?.address})]},r))})]})})})};var u=t(23190),m=t(22408),p=t(81322),h=t(35735),f=t(22621),b=t(91646),g=t(89497),j=t(88161),v=t(96049),y=t(32060),w=t(16299),N=t(29394);let _=(0,r.Z)(({pageCount:e,onPageChange:s,currentPage:t})=>{let r=(0,o.useRouter)(),_=(0,o.useParams)(),k=(0,i.I0)(),C=(0,i.v9)(e=>e?.service?.allFranchiseByBusiness),I=(0,i.v9)(e=>e?.service?.isLoading),P=(0,i.v9)(e=>e?.service?.singleBusiness),[F,Z]=(0,l.useState)(!1),[q,D]=(0,l.useState)(!1),[S,E]=(0,l.useState)(!1),[A,B]=(0,l.useState)(""),M=(0,i.v9)(e=>e?.service?.businessForms),R=(0,i.v9)(e=>e?.reviewForm?.allForms),[G,O]=(0,l.useState)([]),[H,L]=(0,l.useState)(""),[T,$]=(0,l.useState)(1),z=Math.ceil(R?.totalRecords/10),K=n().useMemo(()=>{let e=M?.data?.map(e=>e._id)||[];return Array.isArray(R.data)?R.data.map(e=>({value:e._id,label:e.name})).filter(s=>!e.includes(s.value)):[]},[R.data,M?.data]),Y=I&&!H;(0,l.useEffect)(()=>{k((0,w.PI)({}))},[k]),(0,l.useEffect)(()=>{k((0,f.fx)({currentPage:t,businessId:_?.businessId}))},[t,_?.businessId,k]);let V=e=>{B(e),Z(!0)},W=e=>{L(e),k((0,f.On)({businessId:_?.businessId,formId:e})).then(()=>{k((0,f.fx)({currentPage:t,businessId:_?.businessId})).then(()=>L(""))})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"gradient-bg",children:[P?.data?a.jsx("div",{className:"bg-white rounded-xl p-6 sm:pr-6 pr-8 mb-6 shadow-[0px_0px_60px_30px_#00000008] relative",children:(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-medium",children:"Business Name: "}),P?.data?.name]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-medium",children:"Primary Email: "}),P?.data?.primaryEmail]}),a.jsx("p",{children:a.jsx("span",{className:"font-medium",children:"Reporting Email: "})}),a.jsx("ul",{className:" list-style",children:P?.data?.reportingEmail.length>0?P?.data?.reportingEmail.map((e,s)=>a.jsx("li",{children:e},s)):"No Reporting Email Found"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-medium",children:"Category: "}),P?.data?.categoryId?.name]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-medium",children:"Sub Category: "}),P?.data?.subcategory?.name]}),(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-medium",children:"Reviews: "}),P?.data?.reviews.length]})]})]})}):(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-52 bg-white rounded-xl gap-3 shadow-[0px_0px_60px_30px_#00000008]",children:[a.jsx(c.Z,{}),a.jsx("h2",{className:"text-2xl font-primary",children:"No Location Data found"})]}),a.jsx("div",{className:"flex items-center justify-center mb-6",children:(0,a.jsxs)("button",{onClick:()=>V(P?.data._id),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[a.jsx(h.Z,{color:"#ffffff"}),a.jsx("span",{className:"text-sm",children:" Delete Business"})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3  sm:flex-nowrap flex-wrap",children:[a.jsx("div",{className:"bg-[#FFC020] h-14 w-14 rounded-full flex items-center justify-center shrink-0",children:a.jsx(m.Z,{})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("p",{className:"text-sm font-normal max-w-lg text-[#8D8D8D]",children:"Locations by:"}),(0,a.jsxs)("h2",{className:"text-xl font-medium text-black capitalize",children:[P?.data?.name," "]})]})]}),(0,a.jsxs)("button",{onClick:()=>r.push(`/all-business/${_?.businessId}/add-franchise`),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[a.jsx(p.Z,{})," Add New Location"]})]}),Y?a.jsx(d.Z,{length:10}):C?.data?.Franchise.length>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx(x,{allFranchise:C?.data?.Franchise}),e>1&&a.jsx("div",{className:"flex justify-center mt-4 mb-2",children:a.jsx(u.Z,{pageCount:e,onPageChange:s,currentPage:t})})]}):(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-52 bg-white rounded-xl gap-3 shadow-[0px_0px_60px_30px_#00000008]",children:[a.jsx(c.Z,{}),a.jsx("h2",{className:"text-2xl font-primary",children:"No Location found"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3  sm:flex-nowrap flex-wrap",children:[a.jsx("div",{className:"bg-[#26A8F1] h-14 w-14 rounded-full flex items-center justify-center",children:a.jsx(j.Z,{})}),a.jsx("h2",{className:"text-xl font-medium text-black capitalize",children:"Forms"})]}),(0,a.jsxs)("button",{onClick:()=>D(!0),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[a.jsx(p.Z,{})," Add Form"]})]}),Y?a.jsx(d.Z,{length:10}):M?.data?.length>0?(0,a.jsxs)(a.Fragment,{children:[a.jsx(v.Z,{forms:M?.data,onActivateForm:e=>W(e)}),e>1&&a.jsx("div",{className:"flex justify-center mt-4 mb-2",children:a.jsx(u.Z,{pageCount:z,onPageChange:e=>{$(e.selected)},currentPage:T})})]}):(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-52 bg-white rounded-xl gap-3 shadow-[0px_0px_60px_30px_#00000008]",children:[a.jsx(c.Z,{}),a.jsx("h2",{className:"text-2xl font-primary",children:"No Location found"})]})]})]}),a.jsx(b.Z,{isOpen:F,onClose:()=>Z(!1),heading:"Delete Business",children:(0,a.jsxs)(a.Fragment,{children:[a.jsx("p",{children:"Are you sure you want to delete this business? This action cannot be undone, and all related data will be permanently removed."}),(0,a.jsxs)("div",{className:"flex items-center w-100 gap-3 mt-3",children:[a.jsx("button",{className:"border-black border rounded-xl py-2 max-w-64 w-full bg-white text-black",onClick:()=>Z(!1),children:"Cancel"}),a.jsx("button",{className:"border-red-600 border rounded-xl py-2 max-w-64 w-full bg-red-600 text-white",onClick:()=>{k((0,f.mI)({deleteBusinessId:A,setDeleteModalOpen:Z,router:r}))},children:Y?a.jsx(g.Z,{}):"Delete"})]})]})}),a.jsx(b.Z,{isOpen:q,onClose:()=>D(!1),heading:"Add Form",children:(0,a.jsxs)(a.Fragment,{children:[a.jsx("p",{children:"Select the forms you want to add in this location and press 'Add'"}),a.jsx(y.ZP,{isMulti:!0,placeholder:"Select Forms You Want To Add",name:"forms",options:K,className:"react-select-container forms mb-10",classNamePrefix:"react-select",components:{DropdownIndicator:null},maxMenuHeight:100,menuShouldBlockScroll:!1,menuShouldScrollIntoView:!0,closeMenuOnSelect:!1,onChange:e=>{e&&O(e)},isClearable:!1,value:G,styles:{option:(e,s)=>({...e,backgroundColor:s.isFocused?"#f0f0f0":"#fff",color:s.isFocused?"#333":"#000"})}}),(0,a.jsxs)("div",{className:"flex items-center w-100 gap-3 mt-3",children:[a.jsx("button",{className:"border-black border rounded-xl py-2 max-w-64 w-full bg-white text-black",onClick:()=>D(!1),children:"Cancel"}),a.jsx("button",{className:"border-black border rounded-xl py-2 max-w-64 w-full bg-black text-white",disabled:S,onClick:()=>{G.length?(E(!0),k((0,f.s7)({businessId:_?.businessId,formData:{forms:G.map(e=>e.value)}})).then(()=>{k((0,f.fx)({currentPage:t,businessId:_?.businessId})),O([])}).finally(()=>{D(!1),E(!1)})):N.Am.error("Please select a form to continue.")},children:S?a.jsx(g.Z,{}):"Add"})]})]})})]})});var k=t(25465),C=t(96032),I=t(97933),P=t(21744);let F=(0,r.Z)(()=>{let e=(0,o.useParams)(),s=(0,i.I0)(),t=(0,o.useRouter)(),[r,n]=(0,l.useState)(1),c=(0,i.v9)(e=>e?.service?.singleBusiness?.data),d=(0,i.v9)(e=>e?.service?.allFranchiseByBusiness?.data),x=Math.ceil(d?.totalRecords/10);return(0,l.useEffect)(()=>{let t=e?.businessId;s((0,f.ff)({businessId:t,currentPage:r}))},[s,r,e?.businessId]),(0,l.useEffect)(()=>{let t=e?.businessId;s((0,f.Yo)({businessId:t}))},[s,e?.businessId]),(0,a.jsxs)("main",{className:"container",children:[(0,a.jsxs)("button",{className:"text-[#1191D9] font-semibold text-lg cursor-pointer mb-4 flex items-center gap-1",onClick:()=>t.back(),children:[a.jsx(C.Z,{})," Go Back"]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3  sm:flex-nowrap flex-wrap",children:[a.jsx(I.Z,{src:"https://keephy-bk.vercel.app/"+c?.logo,alt:"user-image",width:56,height:56,className:"object-cover object-center h-14 w-14 rounded-full"}),a.jsx(k.Z,{heading:c?.name,description:"Manage all registered locations in one place.",business:!0})]}),a.jsx("div",{className:"flex itemx-center gap-3 flex-wrap",children:(0,a.jsxs)("button",{onClick:()=>t.push(`/all-business/${e?.businessId}/edit`),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[a.jsx(P.Z,{color:"#ffffff"}),a.jsx("span",{className:"text-sm",children:" Edit business"})]})})]}),a.jsx(_,{pageCount:x,onPageChange:e=>{n(e.selected)},currentPage:r})]})]})})},97933:(e,s,t)=>{"use strict";t.d(s,{Z:()=>n});var a=t(10326),r=t(46226),l=t(17577);let n=e=>{let[s,t]=(0,l.useState)(!1);return a.jsx(a.Fragment,{children:s?a.jsx(r.default,{src:e.image?"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTSZpPDnjQBynSxEHYXo-orWYtvNybtifvhMUdsVjEhuOFpkDYPshISj_TpITVzJullxW4&usqp=CAU":"",alt:"Placeholder",className:e.className||"",style:e.style||{},height:e.height,width:e.width}):a.jsx("img",{src:e.src||"",alt:e.alt||"Image",className:e.className||"",style:e.style||{},onError:()=>{t(!0)},height:e.height,width:e.width})})}},13881:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>l,default:()=>i});var a=t(68570);let r=(0,a.createProxy)(String.raw`D:\Codes\Keephy\keephy-next\src\app\all-business\[businessId]\page.tsx`),{__esModule:l,$$typeof:n}=r;r.default;let i=(0,a.createProxy)(String.raw`D:\Codes\Keephy\keephy-next\src\app\all-business\[businessId]\page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,529,621,226,730,112,193,866],()=>t(94367));module.exports=a})();