(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8252],{5629:function(e,l,s){Promise.resolve().then(s.bind(s,9421))},9421:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return C}});var n=s(7437),i=s(6522),a=s(8440),t=s(1001),o=s(6463),r=s(2265),d=s(1444),c=s(755),x=s(9680),u=s(8332),m=s(528),f=s(59),h=s(9652),p=s(1284),v=s(4496),j=s(3329),g=s(1905),b=s(3792),N=s(4662),w=s(2682),y=s(3580),k=(0,i.Z)(()=>{var e;let l=(0,o.useRouter)(),s=(0,o.useParams)(),i=(0,d.I0)(),t=(0,d.v9)(e=>{var l,s;return null==e?void 0:null===(s=e.service)||void 0===s?void 0:null===(l=s.singleFranchise)||void 0===l?void 0:l.data}),c=(0,d.v9)(e=>{var l;return null==e?void 0:null===(l=e.service)||void 0===l?void 0:l.isLoading}),[x,k]=(0,r.useState)(!1),[_,C]=(0,r.useState)(""),[F,Z]=(0,r.useState)(!1),[I,S]=(0,r.useState)(!1),A=null==s?void 0:s.businessId,E=(0,d.v9)(e=>null==e?void 0:e.service.franchiseForms),P=(0,d.v9)(e=>{var l;return null==e?void 0:null===(l=e.reviewForm)||void 0===l?void 0:l.allForms}),[L,D]=(0,r.useState)(1),M=Math.ceil((null==E?void 0:E.totalRecords)/10),O=r.useMemo(()=>{var e;let l=(null==E?void 0:null===(e=E.data)||void 0===e?void 0:e.map(e=>e._id))||[];return Array.isArray(P.data)?P.data.map(e=>({value:e._id,label:e.name})).filter(e=>!l.includes(e.value)):[]},[P.data,null==E?void 0:E.data]),[z,R]=(0,r.useState)([]),[T,B]=(0,r.useState)(""),H=null==s?void 0:s.locationId,q=c&&!T;(0,r.useEffect)(()=>{i((0,g.PI)({}))},[i]),(0,r.useEffect)(()=>{i((0,a.zw)({currentPage:L,locationId:H}))},[L,H,i]);let G=e=>{C(e),k(!0)},V=e=>{B(e),i((0,a.Bg)({locationId:H,formId:e})).then(()=>{i((0,a.zw)({currentPage:L,locationId:H})).then(()=>B(""))})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"gradient-bg",children:[t?(0,n.jsx)("div",{className:"bg-white rounded-xl p-6 sm:pr-6 pr-8 shadow-[0px_0px_60px_30px_#00000008] relative",children:(0,n.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Location Adress: "}),null==t?void 0:t.address]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Primary Email: "}),null==t?void 0:t.primaryEmail]}),(0,n.jsx)("p",{className:"font-medium",children:"Reporting Email:"}),(0,n.jsx)("ol",{className:"list-inside list-decimal ",children:null==t?void 0:t.reportingEmail.map((e,l)=>(0,n.jsx)("li",{children:e},l))})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Opening Time: "}),null==t?void 0:t.openingHour]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Closing Time: "}),null==t?void 0:t.closingHour]})]})]})}):(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-52 bg-white rounded-xl gap-3 shadow-[0px_0px_60px_30px_#00000008]",children:[(0,n.jsx)(b.Z,{}),(0,n.jsx)("h2",{className:"text-2xl font-primary",children:"No Location Data found"})]}),(0,n.jsx)("div",{className:"flex items-center justify-center mt-6",children:(0,n.jsxs)("button",{onClick:()=>G(null==t?void 0:t._id),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[(0,n.jsx)(u.Z,{color:"#ffffff"}),(0,n.jsx)("span",{className:"text-sm",children:" Delete Location"})]})}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3  sm:flex-nowrap flex-wrap",children:[(0,n.jsx)("div",{className:"bg-[#26A8F1] h-14 w-14 rounded-full flex items-center justify-center",children:(0,n.jsx)(h.Z,{})}),(0,n.jsx)("h2",{className:"text-xl font-medium text-black capitalize",children:"Forms"})]}),(0,n.jsxs)("button",{onClick:()=>S(!0),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[(0,n.jsx)(N.Z,{})," Add Form"]})]}),q?(0,n.jsx)(p.Z,{length:10}):(null==E?void 0:null===(e=E.data)||void 0===e?void 0:e.length)>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.Z,{forms:null==E?void 0:E.data,onActivateForm:e=>V(e)}),M>1&&(0,n.jsx)("div",{className:"flex justify-center mt-4 mb-2",children:(0,n.jsx)(j.Z,{pageCount:M,onPageChange:e=>{D(e.selected)},currentPage:L})})]}):(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-52 bg-white rounded-xl gap-3 shadow-[0px_0px_60px_30px_#00000008]",children:[(0,n.jsx)(b.Z,{}),(0,n.jsx)("h2",{className:"text-2xl font-primary",children:"No Location found"})]})]})]}),(0,n.jsx)(m.Z,{isOpen:x,onClose:()=>k(!1),heading:"Delete Location",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:"Are you sure you want to delete this location? This action cannot be undone, and all related data will be permanently removed."}),(0,n.jsxs)("div",{className:"flex items-center w-100 gap-3 mt-3",children:[(0,n.jsx)("button",{className:"border-black border rounded-xl py-2 max-w-64 w-full bg-white text-black",onClick:()=>k(!1),children:"Cancel"}),(0,n.jsx)("button",{className:"border-red-600 border rounded-xl py-2 max-w-64 w-full bg-red-600 text-white",onClick:()=>{i((0,a.lE)({deleteFranchiseId:_,setDeleteModalOpen:k,router:l,businessId:A})),k(!0)},children:q?(0,n.jsx)(f.Z,{}):"Delete"})]})]})}),(0,n.jsx)(m.Z,{isOpen:I,onClose:()=>S(!1),heading:"Add Form",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:"Select the forms you want to add in this location and press 'Add'"}),(0,n.jsx)(w.ZP,{isMulti:!0,closeMenuOnSelect:!1,placeholder:"Select Forms You Want To Add",name:"forms",options:O,maxMenuHeight:100,menuShouldBlockScroll:!1,menuShouldScrollIntoView:!0,className:"react-select-container forms mb-10",classNamePrefix:"react-select",components:{DropdownIndicator:null},onChange:e=>{e&&R(e)},isClearable:!1,value:z,styles:{option:(e,l)=>({...e,backgroundColor:l.isFocused?"#f0f0f0":"#fff",color:l.isFocused?"#333":"#000"})}}),(0,n.jsxs)("div",{className:"flex items-center w-100 gap-3 mt-3",children:[(0,n.jsx)("button",{className:"border-black border rounded-xl py-2 max-w-64 w-full bg-white text-black",onClick:()=>S(!1),children:"Cancel"}),(0,n.jsx)("button",{className:"border-black border rounded-xl py-2 max-w-64 w-full bg-black text-white",disabled:F,onClick:()=>{z.length?(Z(!0),i((0,a.j_)({locationId:H,formData:{forms:z.map(e=>e.value)}})).then(()=>{i((0,a.zw)({currentPage:L,locationId:H})),R([])}).finally(()=>{S(!1),Z(!1)})):y.Am.error("Please select a form to continue.")},children:F?(0,n.jsx)(f.Z,{}):"Add"})]})]})})]})}),_=s(5581),C=(0,i.Z)(()=>{let e=(0,o.useParams)(),l=(0,d.I0)(),s=(0,o.useRouter)();(0,d.v9)(e=>{var l,s;return null==e?void 0:null===(s=e.service)||void 0===s?void 0:null===(l=s.singleFranchise)||void 0===l?void 0:l.data});let i=null==e?void 0:e.locationId;return(0,r.useEffect)(()=>{l((0,a.q9)({id:i}))},[l,i]),(0,n.jsxs)("main",{className:"container",children:[(0,n.jsxs)("button",{className:"text-[#1191D9] font-semibold text-lg cursor-pointer mb-4 flex items-center gap-1",onClick:()=>s.back(),children:[(0,n.jsx)(c.Z,{})," Go Back"]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3  sm:flex-nowrap flex-wrap",children:[(0,n.jsx)("div",{className:"bg-[#FFC020] h-14 w-14 rounded-full flex items-center justify-center shrink-0",children:(0,n.jsx)(x.Z,{})}),(0,n.jsx)(t.Z,{heading:"Location",description:"Manage your registered location in one place.",business:!0})]}),(0,n.jsxs)("button",{onClick:()=>s.push("/all-business/".concat(null==e?void 0:e.businessId,"/").concat(null==e?void 0:e.locationId,"/edit")),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[(0,n.jsx)(_.Z,{color:"#ffffff"})," Edit Location"]})]}),(0,n.jsx)(k,{})]})]})})}},function(e){e.O(0,[2427,4506,2163,3207,5694,3966,1732,2971,7023,1744],function(){return e(e.s=5629)}),_N_E=e.O()}]);