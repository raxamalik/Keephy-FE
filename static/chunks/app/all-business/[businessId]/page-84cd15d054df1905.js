(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4472],{3132:function(e,s,l){Promise.resolve().then(l.bind(l,8734))},8734:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return I}});var n=l(7437),i=l(6522),a=l(2265),t=l(1444),d=l(3792),r=l(1284),o=l(6463),c=e=>{let{allFranchise:s}=e,l=(0,o.useParams)(),i=(0,o.useRouter)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"relative overflow-x-auto overflow-hidden rounded-xl shadow-[0px_0px_60px_30px_#00000008]",children:(0,n.jsxs)("table",{className:"w-full text-sm text-left text-black-500 border-collapse",children:[(0,n.jsx)("thead",{className:"text-xs bg-[#FFC020] text-white uppercase",children:(0,n.jsxs)("tr",{className:"*:px-6 *:py-3 *:text-base *:font-medium *:whitespace-nowrap *:border-b border-[#D9D9D9]",children:[(0,n.jsx)("th",{scope:"col",children:"Primary Email"}),(0,n.jsx)("th",{scope:"col",children:"Opening Hour"}),(0,n.jsx)("th",{scope:"col",children:"Closing Hour"}),(0,n.jsx)("th",{scope:"col",children:"Address"})]})}),(0,n.jsx)("tbody",{children:(s||[]).map((e,s)=>(0,n.jsxs)("tr",{onClick:()=>i.push("/all-business/".concat(null==l?void 0:l.businessId,"/").concat(e._id)),className:"odd:bg-white even:bg-[#FFC020] cursor-pointer h-[61px] even:bg-opacity-15 last:border-0 border-b border-[#D9D9D9] *:text-sm *:font-normal *:whitespace-nowrap *:px-6 *:py-2.5 *:capitalize",children:[(0,n.jsx)("td",{scope:"row",children:null==e?void 0:e.primaryEmail}),(0,n.jsx)("td",{children:null==e?void 0:e.openingHour}),(0,n.jsx)("td",{children:null==e?void 0:e.closingHour}),(0,n.jsx)("td",{className:"lg:!whitespace-normal",children:null==e?void 0:e.address})]},s))})]})})})},u=l(3329),x=l(9680),m=l(4662),h=l(8332),v=l(8440),p=l(528),f=l(59),j=l(9652),b=l(4496),g=l(2682),N=l(1905),w=l(3580),y=(0,i.Z)(e=>{var s,l,i,y,k,C,F,_,I,Z,S,E,P;let{pageCount:D,onPageChange:A,currentPage:B}=e,M=(0,o.useRouter)(),O=(0,o.useParams)(),R=(0,t.I0)(),H=(0,t.v9)(e=>{var s;return null==e?void 0:null===(s=e.service)||void 0===s?void 0:s.allFranchiseByBusiness}),L=(0,t.v9)(e=>{var s;return null==e?void 0:null===(s=e.service)||void 0===s?void 0:s.isLoading}),T=(0,t.v9)(e=>{var s;return null==e?void 0:null===(s=e.service)||void 0===s?void 0:s.singleBusiness}),[Y,z]=(0,a.useState)(!1),[V,W]=(0,a.useState)(!1),[q,G]=(0,a.useState)(!1),[U,J]=(0,a.useState)(""),Q=(0,t.v9)(e=>{var s;return null==e?void 0:null===(s=e.service)||void 0===s?void 0:s.businessForms}),X=(0,t.v9)(e=>{var s;return null==e?void 0:null===(s=e.reviewForm)||void 0===s?void 0:s.allForms}),[K,$]=(0,a.useState)([]),[ee,es]=(0,a.useState)(""),[el,en]=(0,a.useState)(1),ei=Math.ceil((null==X?void 0:X.totalRecords)/10),ea=a.useMemo(()=>{var e;let s=(null==Q?void 0:null===(e=Q.data)||void 0===e?void 0:e.map(e=>e._id))||[];return Array.isArray(X.data)?X.data.map(e=>({value:e._id,label:e.name})).filter(e=>!s.includes(e.value)):[]},[X.data,null==Q?void 0:Q.data]),et=L&&!ee;(0,a.useEffect)(()=>{R((0,N.PI)({}))},[R]),(0,a.useEffect)(()=>{R((0,v.fx)({currentPage:B,businessId:null==O?void 0:O.businessId}))},[B,null==O?void 0:O.businessId,R]);let ed=e=>{J(e),z(!0)},er=e=>{es(e),R((0,v.On)({businessId:null==O?void 0:O.businessId,formId:e})).then(()=>{R((0,v.fx)({currentPage:B,businessId:null==O?void 0:O.businessId})).then(()=>es(""))})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"gradient-bg",children:[(null==T?void 0:T.data)?(0,n.jsx)("div",{className:"bg-white rounded-xl p-6 sm:pr-6 pr-8 mb-6 shadow-[0px_0px_60px_30px_#00000008] relative",children:(0,n.jsxs)("div",{className:"grid sm:grid-cols-2 grid-cols-1 gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Business Name: "}),null==T?void 0:null===(s=T.data)||void 0===s?void 0:s.name]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Primary Email: "}),null==T?void 0:null===(l=T.data)||void 0===l?void 0:l.primaryEmail]}),(0,n.jsx)("p",{children:(0,n.jsx)("span",{className:"font-medium",children:"Reporting Email: "})}),(0,n.jsx)("ul",{className:" list-style",children:(null==T?void 0:null===(i=T.data)||void 0===i?void 0:i.reportingEmail.length)>0?null==T?void 0:null===(y=T.data)||void 0===y?void 0:y.reportingEmail.map((e,s)=>(0,n.jsx)("li",{children:e},s)):"No Reporting Email Found"})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Category: "}),null==T?void 0:null===(C=T.data)||void 0===C?void 0:null===(k=C.categoryId)||void 0===k?void 0:k.name]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Sub Category: "}),null==T?void 0:null===(_=T.data)||void 0===_?void 0:null===(F=_.subcategory)||void 0===F?void 0:F.name]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{className:"font-medium",children:"Reviews: "}),null==T?void 0:null===(I=T.data)||void 0===I?void 0:I.reviews.length]})]})]})}):(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-52 bg-white rounded-xl gap-3 shadow-[0px_0px_60px_30px_#00000008]",children:[(0,n.jsx)(d.Z,{}),(0,n.jsx)("h2",{className:"text-2xl font-primary",children:"No Location Data found"})]}),(0,n.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,n.jsxs)("button",{onClick:()=>ed(null==T?void 0:T.data._id),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[(0,n.jsx)(h.Z,{color:"#ffffff"}),(0,n.jsx)("span",{className:"text-sm",children:" Delete Business"})]})}),(0,n.jsxs)("div",{className:"flex flex-col gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3  sm:flex-nowrap flex-wrap",children:[(0,n.jsx)("div",{className:"bg-[#FFC020] h-14 w-14 rounded-full flex items-center justify-center shrink-0",children:(0,n.jsx)(x.Z,{})}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"text-sm font-normal max-w-lg text-[#8D8D8D]",children:"Locations by:"}),(0,n.jsxs)("h2",{className:"text-xl font-medium text-black capitalize",children:[null==T?void 0:null===(Z=T.data)||void 0===Z?void 0:Z.name," "]})]})]}),(0,n.jsxs)("button",{onClick:()=>M.push("/all-business/".concat(null==O?void 0:O.businessId,"/add-franchise")),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[(0,n.jsx)(m.Z,{})," Add New Location"]})]}),et?(0,n.jsx)(r.Z,{length:10}):(null==H?void 0:null===(S=H.data)||void 0===S?void 0:S.Franchise.length)>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{allFranchise:null==H?void 0:null===(E=H.data)||void 0===E?void 0:E.Franchise}),D>1&&(0,n.jsx)("div",{className:"flex justify-center mt-4 mb-2",children:(0,n.jsx)(u.Z,{pageCount:D,onPageChange:A,currentPage:B})})]}):(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-52 bg-white rounded-xl gap-3 shadow-[0px_0px_60px_30px_#00000008]",children:[(0,n.jsx)(d.Z,{}),(0,n.jsx)("h2",{className:"text-2xl font-primary",children:"No Location found"})]})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3  sm:flex-nowrap flex-wrap",children:[(0,n.jsx)("div",{className:"bg-[#26A8F1] h-14 w-14 rounded-full flex items-center justify-center",children:(0,n.jsx)(j.Z,{})}),(0,n.jsx)("h2",{className:"text-xl font-medium text-black capitalize",children:"Forms"})]}),(0,n.jsxs)("button",{onClick:()=>W(!0),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[(0,n.jsx)(m.Z,{})," Add Form"]})]}),et?(0,n.jsx)(r.Z,{length:10}):(null==Q?void 0:null===(P=Q.data)||void 0===P?void 0:P.length)>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.Z,{forms:null==Q?void 0:Q.data,onActivateForm:e=>er(e)}),D>1&&(0,n.jsx)("div",{className:"flex justify-center mt-4 mb-2",children:(0,n.jsx)(u.Z,{pageCount:ei,onPageChange:e=>{en(e.selected)},currentPage:el})})]}):(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-52 bg-white rounded-xl gap-3 shadow-[0px_0px_60px_30px_#00000008]",children:[(0,n.jsx)(d.Z,{}),(0,n.jsx)("h2",{className:"text-2xl font-primary",children:"No Location found"})]})]})]}),(0,n.jsx)(p.Z,{isOpen:Y,onClose:()=>z(!1),heading:"Delete Business",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:"Are you sure you want to delete this business? This action cannot be undone, and all related data will be permanently removed."}),(0,n.jsxs)("div",{className:"flex items-center w-100 gap-3 mt-3",children:[(0,n.jsx)("button",{className:"border-black border rounded-xl py-2 max-w-64 w-full bg-white text-black",onClick:()=>z(!1),children:"Cancel"}),(0,n.jsx)("button",{className:"border-red-600 border rounded-xl py-2 max-w-64 w-full bg-red-600 text-white",onClick:()=>{R((0,v.mI)({deleteBusinessId:U,setDeleteModalOpen:z,router:M}))},children:et?(0,n.jsx)(f.Z,{}):"Delete"})]})]})}),(0,n.jsx)(p.Z,{isOpen:V,onClose:()=>W(!1),heading:"Add Form",children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:"Select the forms you want to add in this location and press 'Add'"}),(0,n.jsx)(g.ZP,{isMulti:!0,placeholder:"Select Forms You Want To Add",name:"forms",options:ea,className:"react-select-container forms mb-10",classNamePrefix:"react-select",components:{DropdownIndicator:null},maxMenuHeight:100,menuShouldBlockScroll:!1,menuShouldScrollIntoView:!0,closeMenuOnSelect:!1,onChange:e=>{e&&$(e)},isClearable:!1,value:K,styles:{option:(e,s)=>({...e,backgroundColor:s.isFocused?"#f0f0f0":"#fff",color:s.isFocused?"#333":"#000"})}}),(0,n.jsxs)("div",{className:"flex items-center w-100 gap-3 mt-3",children:[(0,n.jsx)("button",{className:"border-black border rounded-xl py-2 max-w-64 w-full bg-white text-black",onClick:()=>W(!1),children:"Cancel"}),(0,n.jsx)("button",{className:"border-black border rounded-xl py-2 max-w-64 w-full bg-black text-white",disabled:q,onClick:()=>{K.length?(G(!0),R((0,v.s7)({businessId:null==O?void 0:O.businessId,formData:{forms:K.map(e=>e.value)}})).then(()=>{R((0,v.fx)({currentPage:B,businessId:null==O?void 0:O.businessId})),$([])}).finally(()=>{W(!1),G(!1)})):w.Am.error("Please select a form to continue.")},children:q?(0,n.jsx)(f.Z,{}):"Add"})]})]})})]})}),k=l(1001),C=l(755),F=l(7738),_=l(5581),I=(0,i.Z)(()=>{let e=(0,o.useParams)(),s=(0,t.I0)(),l=(0,o.useRouter)(),[i,d]=(0,a.useState)(1),r=(0,t.v9)(e=>{var s,l;return null==e?void 0:null===(l=e.service)||void 0===l?void 0:null===(s=l.singleBusiness)||void 0===s?void 0:s.data}),c=(0,t.v9)(e=>{var s,l;return null==e?void 0:null===(l=e.service)||void 0===l?void 0:null===(s=l.allFranchiseByBusiness)||void 0===s?void 0:s.data}),u=Math.ceil((null==c?void 0:c.totalRecords)/10);return(0,a.useEffect)(()=>{let l=null==e?void 0:e.businessId;s((0,v.ff)({businessId:l,currentPage:i}))},[s,i,null==e?void 0:e.businessId]),(0,a.useEffect)(()=>{let l=null==e?void 0:e.businessId;s((0,v.Yo)({businessId:l}))},[s,null==e?void 0:e.businessId]),(0,n.jsxs)("main",{className:"container",children:[(0,n.jsxs)("button",{className:"text-[#1191D9] font-semibold text-lg cursor-pointer mb-4 flex items-center gap-1",onClick:()=>l.back(),children:[(0,n.jsx)(C.Z,{})," Go Back"]}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-6 flex-wrap",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3  sm:flex-nowrap flex-wrap",children:[(0,n.jsx)(F.Z,{src:"https://keephy-bk.vercel.app/"+(null==r?void 0:r.logo),alt:"user-image",width:56,height:56,className:"object-cover object-center h-14 w-14 rounded-full"}),(0,n.jsx)(k.Z,{heading:null==r?void 0:r.name,description:"Manage all registered locations in one place.",business:!0})]}),(0,n.jsx)("div",{className:"flex itemx-center gap-3 flex-wrap",children:(0,n.jsxs)("button",{onClick:()=>l.push("/all-business/".concat(null==e?void 0:e.businessId,"/edit")),className:"bg-black text-white py-3 px-4 rounded-full flex items-center gap-1 text-sm",children:[(0,n.jsx)(_.Z,{color:"#ffffff"}),(0,n.jsx)("span",{className:"text-sm",children:" Edit business"})]})})]}),(0,n.jsx)(y,{pageCount:u,onPageChange:e=>{d(e.selected)},currentPage:i})]})]})})},7738:function(e,s,l){"use strict";var n=l(7437),i=l(6648),a=l(2265);s.Z=e=>{let[s,l]=(0,a.useState)(!1);return(0,n.jsx)(n.Fragment,{children:s?(0,n.jsx)(i.default,{src:e.image?"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTSZpPDnjQBynSxEHYXo-orWYtvNybtifvhMUdsVjEhuOFpkDYPshISj_TpITVzJullxW4&usqp=CAU":"",alt:"Placeholder",className:e.className||"",style:e.style||{},height:e.height,width:e.width}):(0,n.jsx)("img",{src:e.src||"",alt:e.alt||"Image",className:e.className||"",style:e.style||{},onError:()=>{l(!0)},height:e.height,width:e.width})})}}},function(e){e.O(0,[2427,4506,6648,2163,3207,5694,3966,1732,2971,7023,1744],function(){return e(e.s=3132)}),_N_E=e.O()}]);